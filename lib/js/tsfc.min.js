'use strict';window.tsfC=function(a){let b="undefined"!=typeof tsfCL10n&&tsfCL10n,c=+(b.counterType||0),d={0:"tsf-counter-zero",1:"tsf-counter-one",2:"tsf-counter-two",3:"tsf-counter-three"};const e=a=>{let e=a.e,f=a.text,g=b.guidelines[a.field][a.type].chars,h=tsf.getStringLength(f),i="",j="",k={bad:"tsf-count-bad",okay:"tsf-count-okay",good:"tsf-count-good",unknown:"tsf-count-unknown"};switch(h?h<g.lower?(i=k.bad,j=b.i18n.guidelines.short.farTooShort):h<g.goodLower?(i=k.okay,j=b.i18n.guidelines.short.tooShort):h>g.upper?(i=k.bad,j=b.i18n.guidelines.short.farTooLong):h>g.goodUpper?(i=k.okay,j=b.i18n.guidelines.short.tooLong):(i=k.good,j=b.i18n.guidelines.short.good):(i=k.unknown,j=b.i18n.guidelines.short.empty),c){case 3:j=h.toString()+" - "+j;break;case 2:break;case 1:default:j=h.toString();}for(let b in e.innerHTML=j,k)e.classList.remove(k[b]);for(let b in d)e.classList.remove(d[b]);e.classList.add(i),e.classList.add(d[c])},f=()=>{a(window).trigger("tsf-counter-updated")},g=a=>{a&&++c,3<c&&(c=0),f()},h=()=>{g(!0);let b=".tsf-counter-wrap .tsf-ajax",d=0;tsf.resetAjaxLoader(".tsf-counter-wrap .tsf-ajax"),tsf.setAjaxLoader(".tsf-counter-wrap .tsf-ajax");let e={method:"POST",url:ajaxurl,datatype:"json",data:{action:"the_seo_framework_update_counter",nonce:tsf.nonces.edit_posts,val:c},async:!0,success:a=>{switch(a=tsf.convertJSONResponse(a),"success"===a.type&&(d=1),d){case 0:tsf.unsetAjaxLoader(b,!1);break;case 1:tsf.unsetAjaxLoader(b,!0);break;default:tsf.resetAjaxLoader(b);}}};a.ajax(e)},i=b=>{a(b.target).is(":checked")?a(".tsf-counter-wrap").show():a(".tsf-counter-wrap").hide()},j=b=>{a(b.target).is(":checked")?(a(".tsf-pixel-counter-wrap").show(),f()):a(".tsf-pixel-counter-wrap").hide()},k=()=>a(".tsf-counter").off("click.tsfC").on("click.tsfC",h),l=()=>{k(),a("#autodescription-site-settings\\[display_character_counter\\]").on("click",i),a("#autodescription-site-settings\\[display_pixel_counter\\]").on("click",j)};return Object.assign({load:()=>{a(document.body).on("tsf-onload",l)}},{counterType:c,counterClasses:d},{updatePixelCounter:a=>{let c=a.e,d=a.text,e=b.guidelines[a.field][a.type].pixels,f=c.parentElement;if(!f)return;let g=f.querySelector(".tsf-pixel-counter-bar"),h=f.querySelector(".tsf-pixel-counter-shadow");if(!g||!h)return;h.innerHTML=tsf.escapeString(d);let i=h.offsetWidth,j="",k="",l="",m={bad:"tsf-pixel-counter-bad",okay:"tsf-pixel-counter-okay",good:"tsf-pixel-counter-good",unknown:"tsf-pixel-counter-unknown"};k=100*(i/e.goodUpper)+"%",i?i<e.lower?(j=m.bad,l=b.i18n.guidelines.long.farTooShort):i<e.goodLower?(j=m.okay,l=b.i18n.guidelines.long.tooShort):i>e.upper?(k=100*(e.upper/(i+2*(i-e.upper)/3))+"%",j=m.bad,l=b.i18n.guidelines.long.farTooLong):i>e.goodUpper?(j=m.okay,l=b.i18n.guidelines.long.tooLong,k="100%"):(j=m.good,l=b.i18n.guidelines.long.good):(j=m.unknown,k="100%",l=b.i18n.guidelines.long.empty);let n,o=g.querySelector(".tsf-pixel-counter-fluid");for(let c in n=b.i18n.pixelsUsed.replace(/%1\$d/g,i),n=n.replace(/%2\$d/g,e.goodUpper),n=n+"<br>"+l,m)g.classList.remove(m[c]);g.classList.add(j),o.style.width=k,g.dataset.desc=n,g.setAttribute("aria-label",tsf.escapeString(n.replace(/(<([^>]+)?>?)/ig," "))),tsfTT.triggerUpdate(g)},updateCharacterCounter:e,triggerCounterUpdate:f,resetCounterListener:k})}(jQuery),jQuery(window.tsfC.load);
