'use strict';window.tsfGBC=function(a){function b(a){return k.getEditedPostAttribute(a)}function c(){n={title:b("title"),link:k.getPermalink(),content:b("content"),excerpt:b("excerpt"),visibility:k.getEditedPostVisibility()}}function d(a){return n[a]||null}function e(){let a=n;c(),a.title!==n.title&&o("title"),a.link!==n.link&&o("link"),a.content!==n.content&&o("content"),a.excerpt!==n.excerpt&&o("excerpt"),a.visibility!==n.visibility&&o("visibility")}function f(){p?k.didPostSaveRequestSucceed()?(r(),q()&&q().cancel(),g()):q():(k.isSavingPost()||k.isAutosavingPost())&&(p=!0)}function g(){p=!1}function h(){k.isPostSavingLocked()?3>++s?r():(r()&&r().cancel(),s=0):(s=0,a(document).trigger("tsf-gutenberg-saved-document"))}function i(){l.isEditorSidebarOpened()?!t.opened&&(t.opened=!0,a(document).trigger("tsf-gutenberg-sidebar-opened")):t.opened&&(t.opened=!1,a(document).trigger("tsf-gutenberg-sidebar-closed"))}const j="undefined"!=typeof tsfGBCL10n&&tsfGBCL10n,k=wp.data.select("core/editor"),l=wp.data.select("core/edit-post"),{debounce:m}=lodash;let n;const o=b=>{a(document).trigger("tsf-updated-gutenberg-"+b,[d(b)])};let p=!1;const q=m(g,7e3),r=m(h,500);let s=0,t={opened:!1};const u=()=>{wp.data.subscribe(m(i,500)),wp.data.subscribe(m(e,300)),wp.data.subscribe(f),setTimeout(()=>{c(),o("title"),o("link"),o("content"),o("excerpt"),o("visibility"),a(document).trigger("tsf-subscribed-to-gutenberg")})};return Object.assign({load:()=>{a(document.body).on("tsf-onload",u)}},{triggerUpdate:o},{l10n:j})}(jQuery),jQuery(window.tsfGBC.load);
