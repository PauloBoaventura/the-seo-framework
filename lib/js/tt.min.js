'use strict';window.tsfTT=function(a){const b=()=>{let b,f,g=0,h=!1,i=!1,j=!1,k={},l={};try{(()=>{const a={get passive(){return i=!0,!1},get capture(){return j=!0,!1}};window.addEventListener("tsf-tt-test-passive",null,a),window.removeEventListener("tsf-tt-test-passive",null,a)})()}catch(a){i=!1,j=!1}const m=()=>{h=!0,clearTimeout(g),g=setTimeout(()=>{h=!1},300)},n=(b,c)=>{c=c||!1;let d=a(b);c?(d.off("mousemove.tsfTT mouseleave.tsfTT mouseout.tsfTT blur.tsfTT"),a(document.body).off("pointerdown.tsfTT touchstart.tsfTT click.tsfTT")):(d.on({"mousemove.tsfTT":u,"mouseleave.tsfTT":v,"mouseout.tsfTT":v,"blur.tsfTT":v}),a(document.body).off("pointerdown.tsfTT touchstart.tsfTT click.tsfTT").on("pointerdown.tsfTT touchstart.tsfTT click.tsfTT",w)),d.off("tsf-tooltip-update").on("tsf-tooltip-update",p)},o=a=>n(a,!0),p=b=>{if(b.target.classList.contains("tsf-tooltip-item")){let c=b.target.querySelector(".tsf-tooltip-text");c instanceof Element&&(c.innerHTML=b.target.dataset.desc,a(b.target).trigger("mousemove.tsfTT"))}},q=()=>{b=requestAnimationFrame(s)},r=()=>{f=void 0,l={tooltip:void 0,arrow:void 0,wrap:void 0},k={last:{x:void 0},curr:{x:void 0}},cancelAnimationFrame(b)},s=()=>{var a=Math.round;let b=![k.curr.x].includes(NaN);if(b&&k.curr.x===k.last.x)return void q();k.last.x=k.curr.x;const c=f;let d=l.tooltip||c&&c.target.querySelector(".tsf-tooltip");if(!d)return void q();l.tooltip||(l.tooltip=d),l.arrow||(l.arrow=d.querySelector(".tsf-tooltip-arrow")),l.wrap||(l.wrap=c.target.closest(".tsf-tooltip-wrap")||c.target.parentNode);let e=k.curr.x;"focus"===c.type?e=c.target.getBoundingClientRect().left+c.target.offsetWidth/2:isNaN(e)&&(e=l.tooltip.dataset.lastPagex||c.target.getBoundingClientRect().left),l.tooltip.dataset.lastPagex=e;let g=e-l.wrap.getBoundingClientRect().left-8,h=l.tooltip.querySelector(".tsf-tooltip-text-wrap"),i=h.offsetWidth,j=l.tooltip.dataset.adjust,m=i-16-7;if(j=parseInt(j,10),j=isNaN(j)?0:a(j),j&&(g-=j,m+j>l.wrap.offsetWidth)){let a=h.querySelector(".tsf-tooltip-text"),b=a.offsetWidth;m=b-16-7}l.arrow.style.left=7>=g?"7px":g>=m?m+"px":g+"px",b?q():r()},t=a=>{let b=a.target.dataset.desc||a.target.title||"";b&&!a.target.getElementsByClassName("tsf-tooltip").length&&(a.target.dataset.desc=b,a.target.removeAttribute("title"),c(a,a.target,b))},u=a=>{k.curr.x=a.pageX||NaN,f=a},v=a=>{h||(e(a.target),o(a.target),r())},w=a=>{m();let b,c=".tsf-tooltip-item";if(a.target.classList.contains("tsf-tooltip-item")&&(b=a.target),!b){let d=a.target.querySelectorAll(c);for(const a of d)if(a.querySelector(".tsf-tooltip")){b=a;break}}if(b)for(const a of document.querySelectorAll(c))a!==b&&(e(a),o(a));else{for(const a of document.querySelectorAll(c))e(a),o(a);r()}},x=a=>{if(h)return;if(a.target.dataset.hasTooltip)return;let b=!1;switch(a.type){case"mouseenter":break;case"pointerdown":case"touchstart":b=!0;break;case"focus":default:}b?(m(),w(a)):a.target.dataset.preventedClick=1,r(),t(a),u(a),q(),n(a.target)},y=a=>{a.target.dataset.preventedClick||(a.preventDefault(),setTimeout(()=>a.target.dataset.preventedClick=1))};let z=!1;const A=a=>{z||(z=!0,a.target.classList.contains("tsf-tooltip-item")&&x(a),a.stopPropagation(),z=!1)};let B;const C=!(i||j)||{capture:!0,passive:!0},D=()=>{clearTimeout(B),B=setTimeout(()=>{let a=document.querySelectorAll(".tsf-tooltip-wrap"),b=["mouseenter","pointerdown","touchstart","focus"];for(let c=0;c<a.length;c++)b.forEach(b=>{a[c].addEventListener(b,A,C)}),a[c].addEventListener("click",y)},25)};D(),a(window).on("tsf-tooltip-reset",D),d("#wpwrap")},c=(b,c,d)=>{var f=Math.min;if(c instanceof a&&(c=c.get(0)),c.dataset.hasTooltip=1,c.querySelector(".tsf-tooltip")&&e(c),!d.length)return;let g=document.createElement("div");g.classList.add("tsf-tooltip"),g.insertAdjacentHTML("afterbegin",`<span class="tsf-tooltip-text-wrap"><span class="tsf-tooltip-text">${d}</span></span><div class="tsf-tooltip-arrow" style=will-change:left></div>`),c.prepend(g);let h=c.closest(".tsf-tooltip-boundary")||document.body,i=h.getBoundingClientRect(),j=i.top-(h.scrollTop||0),k=h.offsetWidth,l=12,m=c.closest(".tsf-tooltip-wrap")||c.parentElement,n=m.getBoundingClientRect(),o=g.querySelector(".tsf-tooltip-text-wrap"),p=o.getBoundingClientRect(),q=n.width;250<p.width&&250>q&&150<q&&(o.style.flexBasis=q+"px"),o.offsetWidth>k-l/2?(o.style.flexBasis=f(250,k-l)+"px",l/=2):250<p.width&&(o.style.flexBasis="250px");let r=i.left-(h.scrollLeft||0),s=r+k,t=o.offsetWidth,u=p.left,v=u+t,w=0;if(u<r)w=r-u+l;else if(v>s)w=s-u-t-l;else if(42>q)w=-q/2-l;else if(q>t){let a=b&&b.pageX||NaN;w=b&&"focus"===b.type?q/2-t/2:isNaN(a)?-l:a-n.left-t/2;let c=-l,d=q-t+l;w<c&&(w=c),w>d&&(w=d)}if(w+u<r+l){let a=w+u-(r+l/2);w-=a}if(w+v>s+l){let a=w+v-(s+l/2);w-=a}if(w+u<r&&(w=0),!b){let a=parseInt(o.style.flexBasis,10);w<-a&&(w=-a)}g.style.left=w+"px",g.dataset.adjust=w;let x=c.offsetHeight+8,y=g.getBoundingClientRect().top-x;j>y?(g.classList.add("tsf-tooltip-down"),g.style.top=x+"px"):g.style.bottom=x+"px"},d=b=>{a(b).addClass("tsf-tooltip-boundary")},e=b=>{b instanceof a&&(b=b.get(0)),b instanceof HTMLElement&&(delete b.dataset.hasTooltip,delete b.dataset.preventedClick),f(b).remove()},f=b=>a(b).find(".tsf-tooltip").first();return Object.assign({load:()=>{document.body.addEventListener("tsf-ready",b)}},{doTooltip:c,removeTooltip:e,getTooltip:f,addBoundary:d,triggerReset:()=>{window.dispatchEvent(new CustomEvent("tsf-tooltip-reset"))},triggerUpdate:b=>{a(b||".tsf-tooltip-item").trigger("tsf-tooltip-update")}})}(jQuery),window.tsfTT.load();
