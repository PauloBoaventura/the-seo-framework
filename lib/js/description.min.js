'use strict';window.tsfDescription=function(a){const b="undefined"!=typeof tsfDescriptionL10n&&tsfDescriptionL10n;let c,d={allowReferenceChange:!0,defaultDescription:b.states.defaultDescription};const e=a=>a?a in d?d[a]:void 0:d,f=b=>{let c=document.getElementById("tsf-description-reference"),e=b.target.value;c&&(e=e.trim(),(1>e.length||!d.allowReferenceChange)&&(e=b.target.placeholder),c.innerHTML=tsf.escapeString(tsf.sDoubleSpace(e)),setTimeout(()=>{a(c).change()},0))},g=a=>{if(a.target.value||!d.allowReferenceChange)return;let b=d.defaultDescription.trim(),c=document.createElement("span");c.innerHTML=tsf.escapeString(tsf.sDoubleSpace(b.trim())),a.target.placeholder=tsf.unescapeString(c.textContent)},h=a=>{let b=document.getElementById(a.target.id+"_chars"),c=document.getElementById("tsf-description-reference");b&&c&&tsfC.updateCharacterCounter({e:b,text:tsf.unescapeString(c.innerHTML),field:"description",type:"search"})},i=a=>{let b=document.getElementById(a.target.id+"_pixels"),c=document.getElementById("tsf-description-reference");b&&c&&tsfC.updatePixelCounter({e:b,text:tsf.unescapeString(c.innerHTML),field:"description",type:"search"})},j=()=>{a(c).trigger("input.tsfUpdateDescriptions")},k=()=>{a(c).trigger("tsf-update-description-counter")},l=a=>{g(a),f(a),m(a)},m=a=>{h(a),i(a)};let n=0;const o=()=>{clearTimeout(n),n=setTimeout(j,10)},p=()=>{if(!tsfAys)j();else{let a=tsfAys.getChangedState;j(),a||tsfAys.reset()}};let q=0;const r=()=>{clearTimeout(q),q=setTimeout(p,10)};let s=0,t=window.innerWidth;const u=()=>{clearTimeout(s),s=setTimeout(()=>{let a=window.innerWidth;t<a?782>=t&&782<=a&&p():782<=t&&782>=a&&p(),t=a},50)},v=()=>{window.addEventListener("resize",u),a(window).on("tsf-counter-updated",o)},w=()=>!c instanceof Element?void console.log("tsfDescription: Doing it wrong! Register the description input at \"tsf-onload\". Debug me."):void(a(c).on("input.tsfUpdateDescriptions",l),a(c).on("tsf-update-description-counter",m),r());return Object.assign({load:()=>{a(document.body).on("tsf-onload",v),a(document.body).on("tsf-ready",w)}},{setInputElement:a=>{c=a},getState:e,updateState:(a,b)=>{switch(d[a]=b,a){case"allowReferenceChange":case"defaultDescription":default:o();}},triggerCounter:k,triggerInput:j,enqueueTriggerInput:o,triggerUnregisteredInput:p,enqueueUnregisteredInputTrigger:r},{l10n:b})}(jQuery),jQuery(window.tsfDescription.load);
