'use strict';window.tsfSettings=function(a){const b="undefined"!=typeof tsfSettingsL10n&&tsfSettingsL10n,c=()=>{const b=b=>{a(b.target).is(":checked")?(a(".tsf-pixel-counter-wrap").show(),tsfC.triggerCounterUpdate()):a(".tsf-pixel-counter-wrap").hide()};a("#autodescription-site-settings\\[display_character_counter\\]").on("click",b),a("#autodescription-site-settings\\[display_pixel_counter\\]").on("click",b);const c=wp.template("tsf-disabled-post-type-help")(),d=wp.template("tsf-disabled-taxonomy-help")(),e=wp.template("tsf-disabled-taxonomy-from-pt-help")(),f=a=>tsf.escapeString("tsf-disabled-post-type-input-clone-"+a),g=a=>[document.getElementById("autodescription-site-settings[noindex_post_types]["+a+"]"),document.getElementById("autodescription-site-settings[nofollow_post_types]["+a+"]"),document.getElementById("autodescription-site-settings[noarchive_post_types]["+a+"]")].filter(a=>a),h=(b,d)=>{d?(g(b).forEach(d=>{let e=d.cloneNode(!0);e.type="hidden",e.value=d.checked?d.value:"",e.id+="-cloned",e.classList.add(f(b)),d.disabled=!0,d.dataset.hasWarning=!0,a(d.closest("label")).append(c).append(e)}),tsfTT.triggerReset()):g(b).forEach(a=>{a.dataset.hasWarning&&(a.closest("label").querySelector(".tsf-post-type-warning").remove(),document.querySelectorAll("."+f(b)).forEach(a=>{a.remove()}),a.disabled=!1,a.dataset.hasWarning=!1)})},i=(b,c)=>{let d=document.getElementById("autodescription-site-settings[disabled_taxonomies]["+b+"]");c?a(d.closest("label")).append(e):d.closest("label").querySelector(".tsf-taxonomy-from-pt-warning").remove()};let j=new Set,k=new Set,l=new Set,m=new Set;const n=()=>{let a=document.querySelectorAll(".tsf-disabled-taxonomies"),b=!1;a.forEach(a=>{let c=a.name.split(/(?:.+\[)(.+?)(?:])/).join(""),d=JSON.parse(a.dataset.postTypes),e=d.every(a=>j.has(a));e?(!m.has(c)&&(b=!0),m.add(c)):m.has(c)&&(m.delete(c),b=!0),b&&q(c)})};let o=new Map;const p=a=>o.get(a)||new Set;a(window).on("tsf-post-type-support-changed",(a,b)=>{h(b,j.has(b)),n()}),a(window).on("tsf-taxonomy-support-changed",(a,b)=>{p("disabledTaxonomiesAll").size!==l.size,p("disabledTaxonomies").size!==k.size,p("disabledPtTaxonomies").size!==m.size&&i(b,m.has(b)),o.set("disabledTaxonomiesAll",new Set(l)),o.set("disabledTaxonomies",new Set(k)),o.set("disabledPtTaxonomies",new Set(m))});const q=b=>{l.clear(),k.forEach(a=>l.add(a)),m.forEach(a=>l.add(a)),a(window).trigger("tsf-taxonomy-support-changed",[b,l,k,m])};let r=!1;const s=b=>{if(b.target.name){let c=b.target.name.split(/(?:.+\[)(.+?)(?:])/).join("");a(b.target).is(":checked")?(j.add(c),a(window).trigger("tsf-post-type-support-changed",[c,j])):r&&(j.delete(c),a(window).trigger("tsf-post-type-support-changed",[c,j]))}},t=b=>{if(b.target.name){let c=b.target.name.split(/(?:.+\[)(.+?)(?:])/).join("");a(b.target).is(":checked")?(k.add(c),q(c)):r&&(k.delete(c),q(c))}};a(".tsf-disabled-post-types").on("change.tsfSetPostType",s).trigger("change.tsfSetPostType"),a(".tsf-disabled-taxonomies").on("change.tsfSetTaxonomy",t).trigger("change.tsfSetTaxonomy"),r=!0},d=()=>{let b=a(".tsf-color-picker");b.length&&a.each(b,(b,c)=>{let d=a(c),e="",f=d.data("tsf-default-color");d.wpColorPicker({defaultColor:f,width:238,change:()=>{e=d.wpColorPicker("color"),""===e&&(e=f),d.val(e),tsfAys.registerChange()},clear:()=>{f.length&&(d.val(f),d.closest(".wp-picker-container").find(".wp-color-result").css("backgroundColor",f)),tsfAys.registerChange()},palettes:!1})})},e=()=>{let b=document.getElementById("autodescription-site-settings[title_rem_additions]");a(b).on("change",()=>{let c=a(".tsf-title-additions-js");a(b).is(":checked")?c.css("display","none"):c.css("display","inline")}),a(b).trigger("change");a("#tsf-title-location input").on("click",b=>{let c=a(".tsf-title-additions-example-left"),d=a(".tsf-title-additions-example-right");"right"===a(b.target).val()?(c.css("display","none"),d.css("display","inline")):(c.css("display","inline"),d.css("display","none"))});a("#tsf-title-prefixes-toggle :input").on("click",b=>{let c=a(b.target),d=a(".tsf-title-prefix-example");c.is(":checked")?d.css("display","none"):d.css("display","inline")});a("#tsf-title-separator :input").on("click",b=>{let c=b.target.dataset.entity,d="";d=a("<div/>").html(c).text(),a(".tsf-sep-js").text(" "+d+" "),a(window).trigger("tsf-title-sep-updated",[d])})},f=()=>{const c=document.getElementById("autodescription-site-settings[homepage_title]"),d=document.getElementById("autodescription-site-settings[homepage_title_tagline]"),e=document.getElementById("autodescription-site-settings[homepage_tagline]"),f=tsf.escapeString(b.i18n.protectedTitle),g=tsf.escapeString(b.i18n.privateTitle);tsfTitle.setInputElement(c);const h=()=>{let b=tsfTitle.getState("additionPlacement"),c="after";"left"===a("#tsf-home-title-location input:checked").val()&&(c="before"),c!==b&&tsfTitle.updateState("additionPlacement",c)};h(),a("#tsf-home-title-location").on("click",":input",h);const i=a=>{let b=tsfTitle.getState("prefixValue"),c="";switch(a){case"password":c=f;break;case"private":c=g;break;default:case"public":c="";}c!==b&&tsfTitle.updateState("prefixValue",c)};b.states.isFrontPrivate?i("private"):b.states.isFrontProtected&&i("password");a(c).on("input.tsfInputTitle",b=>{let c=a(".tsf-custom-title-js"),d=tsf.decodeEntities(tsf.sDoubleSpace(b.target.value.trim()));d.length?c.html(tsf.escapeString(d)):c.html(tsf.escapeString(tsf.decodeEntities(tsfTitle.getState("defaultTitle"))))}),a(c).trigger("input.tsfInputTitle");let j,k=a(".tsf-custom-tagline-js");const l=()=>{clearTimeout(j),j=setTimeout(()=>{let b=tsfTitle.getState("additionValue");b=tsf.decodeEntities(tsf.sDoubleSpace(b.trim())),b.length&&tsfTitle.getState("useTagline")?(k.html(tsf.escapeString(b)),a(".tsf-custom-blogname-js").show()):a(".tsf-custom-blogname-js").hide()})};a(d).on("input.tsfInputTagline",()=>{let a=tsfTitle.getState("additionValue"),b=d.value.trim();b.length||(b=d.placeholder||""),b=tsf.escapeString(tsf.decodeEntities(b.trim())),a!==b&&(tsfTitle.updateState("additionValue",b),l())}),a(d).trigger("input.tsfInputTagline");a(e).on("change.tsfToggleTagline",a=>{let b=!1;a.target.checked?(b=!0,d.readOnly=!1):(b=!1,d.readOnly=!0),tsfTitle.updateState("useTagline",b),l()}),a(e).trigger("change.tsfToggleTagline");a(window).on("tsf-title-sep-updated",(a,b)=>{tsfTitle.updateState("separator",b)}),tsfTitle.enqueueUnregisteredInputTrigger()},g=()=>{tsfDescription.setInputElement(document.getElementById("autodescription-site-settings[homepage_description]")),tsfDescription.enqueueUnregisteredInputTrigger()},h=()=>{const b=()=>{tsfTitle.enqueueUnregisteredInputTrigger(),tsfDescription.enqueueUnregisteredInputTrigger()};a(document).on("postbox-toggled",function(a,c){if("autodescription-homepage-settings"===c.id){let a=c.querySelector(".inside");0<a.offsetHeight&&0<a.offsetWidth&&b()}}),a("#tsf-homepage-tab-general").on("tsf-tab-toggled",tsfTitle.enqueueUnregisteredInputTrigger)},i=()=>{const b=a("#autodescription-site-settings\\[set_copyright_directives\\]"),c=a("#autodescription-site-settings\\[max_snippet_length\\], #autodescription-site-settings\\[max_image_preview\\], #autodescription-site-settings\\[max_video_preview\\]");if(b.length&&c.length){b.on("change.tsfToggleDirectives",b=>{b.target.checked?(c.prop("disabled",!1),a(".tsf-toggle-directives-surrogate").remove()):(c.prop("disabled",!0),c.each((b,c)=>{a("<input />").attr("type","hidden").attr("name",c.name||"").val(c.value||0).addClass("tsf-toggle-directives-surrogate").insertAfter(c)}))}),b.trigger("change.tsfToggleDirectives")}},j=()=>{const b=a("#autodescription-site-settings\\[google_verification\\], #autodescription-site-settings\\[bing_verification\\], #autodescription-site-settings\\[yandex_verification\\], #autodescription-site-settings\\[baidu_verification\\], #autodescription-site-settings\\[pint_verification\\]");if(b.length){const a=a=>{let b=a.originalEvent.clipboardData&&a.originalEvent.clipboardData.getData("text")||void 0;if(b){let c=/<meta[^>]+content=(\"|\')?([^\"\'>\s]+)\1?.*?>/i.exec(b);c&&2 in c&&"string"==typeof c[2]&&c[2].length&&(a.stopPropagation(),a.preventDefault(),a.target.value=c[2],tsfAys.registerChange())}};b.on("paste",a)}},k=()=>{c(),e(),f(),g(),h(),i(),j(),d()},l=()=>{tsfSocial.initTitleInputs({ref:document.getElementById("tsf-title-reference"),meta:document.getElementById("autodescription-site-settings[homepage_title]"),og:document.getElementById("autodescription-site-settings[homepage_og_title]"),tw:document.getElementById("autodescription-site-settings[homepage_twitter_title]")}),tsfSocial.initDescriptionInputs({ref:document.getElementById("tsf-description-reference"),meta:document.getElementById("autodescription-site-settings[homepage_description]"),og:document.getElementById("autodescription-site-settings[homepage_og_description]"),tw:document.getElementById("autodescription-site-settings[homepage_twitter_description]")})},m=()=>confirm(b.i18n.confirmReset),n=()=>{let b={};a(".tsf-tabs-radio").on("change",(c,d)=>{let e=a(c.target);if(!e.is(":checked"))return;d="boolean"==typeof d&&d;let f=c.target.id,g=c.target.name,h="tsf-active-tab-content",i="tsf-tab-active",j=a("."+h),k=e.closest(".tsf-nav-tab-wrapper").find("."+i),l=j.find("input:invalid, select:invalid, textarea:invalid");if(l.length)return l[0].reportValidity(),k.prop("checked",!0),e.prop("checked",!1),c.stopPropagation(),c.preventDefault(),!1;if(k.removeClass(i),k.siblings("label").removeClass("tsf-no-focus-ring"),e.addClass(i),d){document.querySelectorAll("."+g+"-content").forEach(a=>{a.classList.remove(h),a.style.display="none"});let b=document.getElementById(f+"-content");b.classList.add(h),b.style.display=null,a("#"+f).trigger("tsf-tab-toggled")}else{b.hasOwnProperty(g)||(b[g]={});const c=150;if(b[g].hasOwnProperty("addClass")&&clearTimeout(b[g].addClass),b[g].hasOwnProperty("trigger")&&clearTimeout(b[g].trigger),"number"!=typeof b[g].fadeOut){b[g].fadeOut=setTimeout(()=>{b[g].fadeOut=void 0},c);let d=a("."+g+"-content");d.fadeOut(c,function(){a(this).removeClass(h)})}b[g].addClass=setTimeout(()=>{let b=a("#"+f+"-content");b.addClass(h).fadeIn(250)},150),b[g].trigger=setTimeout(()=>{a("#"+f).trigger("tsf-tab-toggled")},175)}});a(".tsf-nav-tab-wrapper").on("click.tsfNavTab",".tsf-nav-tab",a=>{a.currentTarget.classList.add("tsf-no-focus-ring")});window.addEventListener("load",()=>{a(".tsf-tabs-radio:checked").each((b,c)=>{a(c).trigger("change",[!0])})})};return Object.assign({load:()=>{a("div.updated, div.error, div.notice, .notice-error, .notice-warning, .notice-info").insertAfter(".tsf-top-wrap"),a(document.body).on("tsf-onload",k),a(document.body).on("tsf-ready",l),a(".tsf-js-confirm-reset").on("click",m),n()}},{},{l10n:b})}(jQuery),jQuery(window.tsfSettings.load);
