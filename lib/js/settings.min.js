'use strict';window.tsfSettings=function(a){const b="undefined"!=typeof tsfSettingsL10n&&tsfSettingsL10n,c=()=>{const b=b=>{a(b.target).is(":checked")?(a(".tsf-pixel-counter-wrap").show(),tsfC.triggerCounterUpdate()):a(".tsf-pixel-counter-wrap").hide()};a("#autodescription-site-settings\\[display_character_counter\\]").on("click",b),a("#autodescription-site-settings\\[display_pixel_counter\\]").on("click",b);const c=wp.template("tsf-disabled-post-type-help")(),d=wp.template("tsf-disabled-taxonomy-help")(),e=wp.template("tsf-disabled-taxonomy-from-pt-help")(),f=a=>tsf.escapeString("tsf-disabled-post-type-input-clone-"+a),g=a=>tsf.escapeString("tsf-disabled-taxonomy-input-clone-"+a),h=a=>[document.getElementById("autodescription-site-settings[noindex_post_types]["+a+"]"),document.getElementById("autodescription-site-settings[nofollow_post_types]["+a+"]"),document.getElementById("autodescription-site-settings[noarchive_post_types]["+a+"]")].filter(a=>a),i=a=>[document.getElementById("autodescription-site-settings[noindex_taxonomies]["+a+"]"),document.getElementById("autodescription-site-settings[nofollow_taxonomies]["+a+"]"),document.getElementById("autodescription-site-settings[noarchive_taxonomies]["+a+"]")].filter(a=>a),j=(b,d)=>{d?(h(b).forEach(d=>{if(d){let e=d.cloneNode(!0);e.type="hidden",e.value=d.checked?d.value:"",e.id+="-cloned",e.classList.add(f(b)),d.disabled=!0,d.dataset.hasWarning=1,a(d.closest("label")).append(c).append(e)}}),tsfTT.triggerReset()):h(b).forEach(a=>{a&&a.dataset.hasWarning&&(a.closest("label").querySelector(".tsf-post-type-warning").remove(),document.querySelectorAll("."+f(b)).forEach(a=>{a.remove()}),a.disabled=!1,a.dataset.hasWarning="")})},k=(b,c)=>{c?(i(b).forEach(c=>{if(c){let e=c.cloneNode(!0);e.type="hidden",e.value=c.checked?c.value:"",e.id+="-cloned",e.classList.add(g(b)),c.disabled=!0,c.dataset.hasWarning=1,a(c.closest("label")).append(d).append(e)}}),tsfTT.triggerReset()):i(b).forEach(a=>{a&&a.dataset.hasWarning&&(a.closest("label").querySelector(".tsf-taxonomy-warning").remove(),document.querySelectorAll("."+g(b)).forEach(a=>{a.remove()}),a.disabled=!1,a.dataset.hasWarning="")})},l=(b,c)=>{let d=document.getElementById("autodescription-site-settings[disabled_taxonomies]["+b+"]");c?(a(d.closest("label")).append(e),tsfTT.triggerReset()):d.closest("label").querySelector(".tsf-taxonomy-from-pt-warning").remove()};let m=new Set,n=new Set,o=new Set,p=new Set;const q=()=>{let a=document.querySelectorAll(".tsf-disabled-taxonomies"),b=!1;a.forEach(a=>{let c=a.name.split(/(?:.+\[)(.+?)(?:])/).join(""),d=JSON.parse(a.dataset.postTypes),e=d.every(a=>m.has(a));e?(!p.has(c)&&(b=!0),p.add(c)):p.has(c)&&(p.delete(c),b=!0),b&&t(c)})};let r=new Map;const s=a=>r.get(a)||new Set;a(window).on("tsf-post-type-support-changed",(a,b)=>{j(b,m.has(b)),q()}),a(window).on("tsf-taxonomy-support-changed",(a,b)=>{s("disabledTaxonomiesAll").size!==o.size&&k(b,o.has(b)),s("disabledPtTaxonomies").size!==p.size&&l(b,p.has(b)),r.set("disabledTaxonomiesAll",new Set(o)),r.set("disabledTaxonomies",new Set(n)),r.set("disabledPtTaxonomies",new Set(p))});const t=b=>{o.clear(),n.forEach(a=>o.add(a)),p.forEach(a=>o.add(a)),a(window).trigger("tsf-taxonomy-support-changed",[b,o,n,p])};let u=!1;const v=b=>{if(b.target.name){let c=b.target.name.split(/(?:.+\[)(.+?)(?:])/).join("");a(b.target).is(":checked")?(m.add(c),a(window).trigger("tsf-post-type-support-changed",[c,m])):u&&(m.delete(c),a(window).trigger("tsf-post-type-support-changed",[c,m]))}},w=b=>{if(b.target.name){let c=b.target.name.split(/(?:.+\[)(.+?)(?:])/).join("");a(b.target).is(":checked")?(n.add(c),t(c)):u&&(n.delete(c),t(c))}};a(".tsf-disabled-post-types").on("change.tsfSetPostType",v).trigger("change.tsfSetPostType"),a(".tsf-disabled-taxonomies").on("change.tsfSetTaxonomy",w).trigger("change.tsfSetTaxonomy"),u=!0},d=()=>{let b=a(".tsf-color-picker");b.length&&a.each(b,(b,c)=>{let d=a(c),e="",f=d.data("tsf-default-color");d.wpColorPicker({defaultColor:f,width:238,change:()=>{e=d.wpColorPicker("color"),""===e&&(e=f),d.val(e),tsfAys.registerChange()},clear:()=>{f.length&&(d.val(f),d.closest(".wp-picker-container").find(".wp-color-result").css("backgroundColor",f)),tsfAys.registerChange()},palettes:!1})})},e=()=>{const b=document.getElementById("autodescription-site-settings[title_rem_additions]"),c=document.getElementById("autodescription-site-settings[social_title_rem_additions]"),d=wp.template("tsf-disabled-title-additions-help")();a(b).on("change.tsfSetAdditions",()=>{let e=a(".tsf-title-additions-js");a(b).is(":checked")?(e.css("display","none"),c&&(c.dataset.hasWarning=1,a(c.closest("label")).append(d),tsfTT.triggerReset())):(e.css("display","inline"),c&&c.dataset.hasWarning&&c.closest("label").querySelector(".tsf-title-additions-warning").remove())}).trigger("change.tsfSetAdditions");a("#tsf-title-location input").on("click",b=>{let c=a(".tsf-title-additions-example-left"),d=a(".tsf-title-additions-example-right");"right"===a(b.target).val()?(c.css("display","none"),d.css("display","inline")):(c.css("display","inline"),d.css("display","none"))});a("#tsf-title-prefixes-toggle :input").on("click",b=>{let c=a(b.target),d=a(".tsf-title-prefix-example");c.is(":checked")?d.css("display","none"):d.css("display","inline")});a("#tsf-title-separator :input").on("click",b=>{let c=tsf.decodeEntities(b.target.dataset.entity);a(".tsf-sep-js").text(` ${c} `),a(window).trigger("tsf-title-sep-updated",[c]);let d=document.querySelector(`.${"tsf-title-separator-active"}`);d&&d.classList.remove("tsf-title-separator-active","tsf-no-focus-ring");let e=document.querySelector(`label[for="${b.target.id}"]`);e&&e.classList.add("tsf-title-separator-active")});a("#tsf-title-separator label").on("click",a=>{a.target.classList.add("tsf-no-focus-ring")})},f=()=>{const c="autodescription-site-settings[homepage_title]",d=document.getElementById("autodescription-site-settings[homepage_title]"),e=document.getElementById("autodescription-site-settings[homepage_title_tagline]"),f=document.getElementById("autodescription-site-settings[homepage_tagline]");tsfTitle.setInputElement(d);let g=JSON.parse(document.getElementById("tsf-title-data_autodescription-site-settings[homepage_title]").dataset.state);tsfTitle.updateStateOf("autodescription-site-settings[homepage_title]","allowReferenceChange",!g.refTitleLocked),tsfTitle.updateStateOf("autodescription-site-settings[homepage_title]","defaultTitle",g.defaultTitle.trim()),tsfTitle.updateStateOf("autodescription-site-settings[homepage_title]","addAdditions",g.addAdditions),tsfTitle.updateStateOf("autodescription-site-settings[homepage_title]","useSocialTagline",!!(g.useSocialTagline||!1)),tsfTitle.updateStateOf("autodescription-site-settings[homepage_title]","additionValue",g.additionValue.trim()),tsfTitle.updateStateOf("autodescription-site-settings[homepage_title]","additionPlacement",g.additionPlacement),tsfTitle.updateStateOf("autodescription-site-settings[homepage_title]","hasLegacy",!!(g.hasLegacy||!1)),tsfTitle.enqueueUnregisteredInputTrigger("autodescription-site-settings[homepage_title]");const h=()=>{let b=tsfTitle.getStateOf(c,"additionPlacement"),d="after";"left"===a("#tsf-home-title-location input:checked").val()&&(d="before"),d!==b&&tsfTitle.updateStateOf(c,"additionPlacement",d)};h(),a("#tsf-home-title-location").on("click",":input",h);const i=a=>{let b=tsfTitle.getStateOf(c,"prefixValue"),d="";switch(a){case"password":d=tsfTitle.protectedPrefix;break;case"private":d=tsfTitle.privatePrefix;break;default:case"public":d="";}d!==b&&tsfTitle.updateStateOf(c,"prefixValue",d)};b.states.isFrontPrivate?i("private"):b.states.isFrontProtected&&i("password");a(d).on("input.tsfInputTitle",b=>{let d=a(".tsf-custom-title-js"),e=tsf.decodeEntities(tsf.sDoubleSpace(b.target.value.trim()));e.length?d.html(tsf.escapeString(e)):d.html(tsf.escapeString(tsf.decodeEntities(tsfTitle.getStateOf(c,"defaultTitle"))))}).trigger("input.tsfInputTitle");let j,k=a(".tsf-custom-tagline-js");const l=()=>{clearTimeout(j),j=setTimeout(()=>{let b=tsfTitle.getStateOf(c,"additionValue");b=tsf.decodeEntities(tsf.sDoubleSpace(b.trim())),b.length&&tsfTitle.getStateOf(c,"addAdditions")?(k.html(tsf.escapeString(b)),a(".tsf-custom-blogname-js").show()):a(".tsf-custom-blogname-js").hide()})};a(e).on("input.tsfInputTagline",()=>{let a=tsfTitle.getStateOf(c,"additionValue"),b=e.value.trim();b.length||(b=e.placeholder||""),b=tsf.escapeString(tsf.decodeEntities(b.trim())),a!==b&&(tsfTitle.updateStateOf(c,"additionValue",b),l())}).trigger("input.tsfInputTagline");a(f).on("change.tsfToggleTagline",a=>{let b=!1;a.target.checked?(b=!0,e.readOnly=!1):(b=!1,e.readOnly=!0),tsfTitle.updateStateOf(c,"addAdditions",b),l()}).trigger("change.tsfToggleTagline");a(window).on("tsf-title-sep-updated",(a,b)=>{tsfTitle.updateStateAll("separator",b)})},g=()=>{let a=JSON.parse(document.getElementById("tsf-description-data_autodescription-site-settings[homepage_description]").dataset.state);tsfDescription.setInputElement(document.getElementById("autodescription-site-settings[homepage_description]")),tsfDescription.updateStateOf("autodescription-site-settings[homepage_description]","defaultDescription",a.defaultDescription.trim()),tsfDescription.updateStateOf("autodescription-site-settings[homepage_description]","hasLegacy",!!(a.hasLegacy||!1)),tsfDescription.enqueueUnregisteredInputTrigger("autodescription-site-settings[homepage_description]")},h=()=>{const b=()=>{tsfTitle.enqueueUnregisteredInputTrigger("autodescription-site-settings[homepage_title]"),tsfDescription.enqueueUnregisteredInputTrigger("autodescription-site-settings[homepage_description]")};a(document).on("postbox-toggled",function(a,c){if("autodescription-homepage-settings"===c.id){let a=c.querySelector(".inside");0<a.offsetHeight&&0<a.offsetWidth&&b()}}),a("#tsf-homepage-tab-general").on("tsf-tab-toggled",b)},i=()=>{const b=document.getElementById("autodescription-site-settings[social_title_rem_additions]");a(b).on("change.tsfSetAdditions",()=>{a(b).is(":checked")?tsfTitle.updateStateAll("useSocialTagline",!1):tsfTitle.updateStateAll("useSocialTagline",!0)})},j=()=>{const b=a("#autodescription-site-settings\\[set_copyright_directives\\]"),c=a("#autodescription-site-settings\\[max_snippet_length\\], #autodescription-site-settings\\[max_image_preview\\], #autodescription-site-settings\\[max_video_preview\\]");if(b.length&&c.length){b.on("change.tsfToggleDirectives",b=>{b.target.checked?(c.prop("disabled",!1),a(".tsf-toggle-directives-surrogate").remove()):(c.prop("disabled",!0),c.each((b,c)=>{a("<input />").attr("type","hidden").attr("name",c.name||"").val(c.value||0).addClass("tsf-toggle-directives-surrogate").insertAfter(c)}))}),b.trigger("change.tsfToggleDirectives")}},k=()=>{const b=a("#autodescription-site-settings\\[google_verification\\], #autodescription-site-settings\\[bing_verification\\], #autodescription-site-settings\\[yandex_verification\\], #autodescription-site-settings\\[baidu_verification\\], #autodescription-site-settings\\[pint_verification\\]");if(b.length){const a=a=>{let b=a.originalEvent.clipboardData&&a.originalEvent.clipboardData.getData("text")||void 0;if(b){let c=/<meta[^>]+content=(\"|\')?([^\"\'>\s]+)\1?.*?>/i.exec(b);c&&2 in c&&"string"==typeof c[2]&&c[2].length&&(a.stopPropagation(),a.preventDefault(),a.target.value=c[2],tsfAys.registerChange())}};b.on("paste",a)}},l=()=>{c(),e(),f(),g(),h(),i(),j(),k(),d(),a(".tsf-js-confirm-reset").on("click",n)},m=()=>{tsfSocial.initTitleInputs({ref:document.getElementById("tsf-title-reference_autodescription-site-settings[homepage_title]"),refNa:document.getElementById("tsf-title-noadditions-reference_autodescription-site-settings[homepage_title]"),meta:document.getElementById("autodescription-site-settings[homepage_title]"),og:document.getElementById("autodescription-site-settings[homepage_og_title]"),tw:document.getElementById("autodescription-site-settings[homepage_twitter_title]")}),tsfSocial.initDescriptionInputs({ref:document.getElementById("tsf-description-reference_autodescription-site-settings[homepage_description]"),meta:document.getElementById("autodescription-site-settings[homepage_description]"),og:document.getElementById("autodescription-site-settings[homepage_og_description]"),tw:document.getElementById("autodescription-site-settings[homepage_twitter_description]")})},n=()=>confirm(b.i18n.confirmReset),o=()=>{let b={};a(".tsf-tabs-radio").on("change",(c,d)=>{let e=a(c.target);if(!e.is(":checked"))return;d="boolean"==typeof d&&d;let f=c.target.id,g=c.target.name,h="tsf-active-tab-content",i="tsf-tab-active",j=a("."+h),k=e.closest(".tsf-nav-tab-wrapper").find("."+i),l=j.find("input:invalid, select:invalid, textarea:invalid");if(l.length)return l[0].reportValidity(),k.prop("checked",!0),e.prop("checked",!1),c.stopPropagation(),c.preventDefault(),!1;if(k.removeClass(i),k.siblings("label").removeClass("tsf-no-focus-ring"),e.addClass(i),d){document.querySelectorAll("."+g+"-content").forEach(a=>{a.classList.remove(h),a.style.display="none"});let b=document.getElementById(f+"-content");b.classList.add(h),b.style.display=null,a("#"+f).trigger("tsf-tab-toggled")}else{b.hasOwnProperty(g)||(b[g]={fadeOut:void 0,addClass:void 0,trigger:void 0});const c=150;if(clearTimeout(b[g].addClass),clearTimeout(b[g].trigger),"number"!=typeof b[g].fadeOut){b[g].fadeOut=setTimeout(()=>{b[g].fadeOut=void 0},c);let d=a("."+g+"-content");d.stop(!1,!0).fadeOut(c,function(){a(this).removeClass(h)})}b[g].addClass=setTimeout(()=>{let b=a("#"+f+"-content");b.stop(!1,!0).addClass(h).fadeIn(250)},150),b[g].trigger=setTimeout(()=>{a("#"+f).trigger("tsf-tab-toggled")},175)}});a(".tsf-nav-tab-wrapper").on("click.tsfNavTab",".tsf-nav-tab",a=>{a.currentTarget.classList.add("tsf-no-focus-ring")});const c=()=>{window.removeEventListener("load",c),a(".tsf-tabs-radio:checked").each((b,c)=>{a(c).trigger("change",[!0])})};window.addEventListener("load",c)};return Object.assign({load:()=>{a("div.updated, div.error, div.notice, .notice-error, .notice-warning, .notice-info").insertAfter(".tsf-top-wrap"),document.body.addEventListener("tsf-onload",l),document.body.addEventListener("tsf-ready",m),o()}},{},{l10n:b})}(jQuery),window.tsfSettings.load();
