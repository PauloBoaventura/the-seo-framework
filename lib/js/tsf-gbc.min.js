'use strict';window.tsfGBC=function(a){function b(a){return j.getEditedPostAttribute(a)}function c(){n={title:b("title"),link:j.getPermalink(),content:b("content"),excerpt:b("excerpt"),visibility:j.getEditedPostVisibility()}}function d(a){return n[a]||null}function e(){let a=n;c(),a.title!==n.title&&o("title"),a.link!==n.link&&o("link"),a.content!==n.content&&o("content"),a.excerpt!==n.excerpt&&o("excerpt"),a.visibility!==n.visibility&&o("visibility")}function f(){p?j.didPostSaveRequestSucceed()?(r(),q()&&q().cancel(),g()):q():(j.isSavingPost()||j.isAutosavingPost())&&(p=!0)}function g(){p=!1}function h(){j.isPostSavingLocked()?3>++s?r():(r()&&r().cancel(),s=0):(s=0,a(document).trigger("tsf-gutenberg-saved-document"))}function i(){k.isEditorSidebarOpened()?!t.opened&&(t.opened=!0,a(document).trigger("tsf-gutenberg-sidebar-opened")):t.opened&&(t.opened=!1,a(document).trigger("tsf-gutenberg-sidebar-closed"))}const j=wp.data.select("core/editor"),k=wp.data.select("core/edit-post"),{debounce:l}=lodash,m="undefined"!=typeof tsfGBCL10n&&tsfGBCL10n;let n;const o=b=>{a(document).trigger("tsf-updated-gutenberg-"+b,[d(b)])};let p=!1;const q=l(g,7e3),r=l(h,500);let s=0,t={opened:!1};const u=()=>{wp.data.subscribe(l(i,500)),wp.data.subscribe(l(e,300)),wp.data.subscribe(f),setTimeout(()=>{c(),o("title"),o("link"),o("content"),o("excerpt"),o("visibility"),a(document).trigger("tsf-subscribed-to-gutenberg")})};return Object.assign({load:()=>{a(document.body).on("tsf-onload",u)}},{triggerUpdate:o},{l10n:m})}(jQuery),jQuery(window.tsfGBC.load);
