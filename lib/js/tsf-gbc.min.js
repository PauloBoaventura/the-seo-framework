'use strict';window.tsfGBC=function(a){function b(a){return i.getEditedPostAttribute(a)}function c(){k={title:b("title"),link:i.getPermalink(),content:b("content"),excerpt:b("excerpt"),visibility:i.getEditedPostVisibility()}}function d(a){return k[a]||null}function e(){let a=k;c(),a.title!==k.title&&m("title"),a.link!==k.link&&m("link"),a.content!==k.content&&m("content"),a.excerpt!==k.excerpt&&m("excerpt"),a.visibility!==k.visibility&&m("visibility")}function f(){n?i.didPostSaveRequestSucceed()?(h(),o()&&o().cancel(),g()):o():(i.isSavingPost()||i.isAutosavingPost())&&(n=!0)}function g(){n=!1}function h(){i.isPostSavingLocked()?3>++q?p():(p()&&p().cancel(),q=0):(q=0,a(document).trigger("tsf-gutenberg-saved-document"))}const i=wp.data.select("core/editor"),{debounce:j}=lodash;let k,l="undefined"!=typeof tsfGBCL10n&&tsfGBCL10n;const m=b=>{a(document).trigger("tsf-updated-gutenberg-"+b,[d(b)])};let n=!1;const o=j(g,7e3),p=j(h,500);let q=0;const r=()=>{"undefined"!=typeof tsfTT&&tsfTT.addBoundary("#editor"),wp.data.subscribe(j(e,300)),wp.data.subscribe(f),setTimeout(()=>{c(),m("title"),m("link"),m("content"),m("excerpt"),m("visibility"),a(document).trigger("tsf-subscribed-to-gutenberg")})};return a.extend({load:()=>{a(document.body).on("tsf-onload",r)}},{triggerUpdate:m})}(jQuery),jQuery(window.tsfGBC.load);
