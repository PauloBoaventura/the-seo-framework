'use strict';window.tsf=function(a){const b="undefined"!=typeof tsfL10n&&tsfL10n;let c;const d=()=>{if(void 0===c){try{new DOMParser().parseFromString("","text/html")&&(c=!0)}catch(a){}c=!!c}return c},f=a=>{if(!a.length)return"";let b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","\\":"&#92;","/":"&#x2F;"};return a.replace(/[&<>"']|\\\//g,a=>b[a])};let g;const h=a=>{if(!a.length)return"";let b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","\\":"&#92;","/":"&#x2F;"};return g=g||new RegExp(Object.values(b).map(a=>a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).join("|"),"g"),a.replace(g,a=>Object.keys(b).find(c=>b[c]===a))},i=b=>{a(b.target).parents(".tsf-notice").slideUp(200,function(){this.remove()})},j=()=>{let b;if(b=a(".postbox[id^=\"autodescription-\"], .postbox#tsf-inpost-box").find(".hndle, .handlediv"),!b||!b.length)return;let c;const d=()=>{c[0].reportValidity()},e=b=>{let e=a(b.target).closest(".postbox");e[0].classList.contains("closed")&&(c=e.find("input:invalid, select:invalid, textarea:invalid"),c.length&&(a(document).one("postbox-toggled",d),a(b.target).trigger("click")))};b.on("click.tsfPostboxes",e)},k=()=>{a(document.body).trigger("tsf-ready")},l=()=>{a(document.body).trigger("tsf-onload")},m=()=>{l(),j(),k()};return Object.assign({load:()=>{a(document.body).addClass("tsf-js"),a(".tsf-dismiss").on("click",i),a(document.body).ready(m)}},{stripTags:a=>a.length&&a.replace(/(<([^>]+)?>?)/ig,"")||"",decodeEntities:a=>{if(!a.length)return"";let b={"<":"&lt;",">":"&gt;","\\":"&#92;"};if(a=a.replace(/[<>]|\\\\|\\/g,a=>b[a]),d())a=new DOMParser().parseFromString(a,"text/html").documentElement.textContent;else{let b=document.createElement("span");b.innerHTML=a,a=h(b.textContent)}return f(a)},escapeString:f,unescapeString:h,sDoubleSpace:a=>a.replace(/\s\s+/g," "),getStringLength:a=>{let b,c=0;return a.length&&(b=document.createElement("span"),b.innerHTML=f(a).trim(),"undefined"!=typeof b.childNodes[0]&&(c=b.childNodes[0].nodeValue.length)),+c},convertJSONResponse:a=>{let b=a&&a.json||void 0,c=1===b;if(!c){let b=a;try{a=JSON.parse(a),c=!0}catch(a){c=!1}c||(a=b)}return a},setAjaxLoader:b=>{a(b).toggleClass("tsf-loading")},unsetAjaxLoader:(b,c)=>{let d="tsf-success",e=2500;c||(d="tsf-error",e=5e3),a(b).removeClass("tsf-loading").addClass(d).fadeOut(e)},resetAjaxLoader:b=>{a(b).stop().empty().prop("class","tsf-ajax").css("opacity","1").removeProp("style")}},{l10n:b})}(jQuery),jQuery(window.tsf.load);
